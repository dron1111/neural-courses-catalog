{% extends "base.html" %}

{% block title %}{% if is_new %}–°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {{ course.title }}{% endif %} ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">
            {% if is_new %}
            –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫—É—Ä—Å–∞
            {% else %}
            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞: <span class="text-blue-600">{{ course.title }}</span>
            {% endif %}
        </h1>
        <p class="text-gray-600 mt-2">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã. –ü–æ–ª–µ "slug" –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º.</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    {% if error %}
    <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6">
        <div class="flex">
            <div class="flex-shrink-0">
                <span class="text-red-500">‚ö†Ô∏è</span>
            </div>
            <div class="ml-3">
                <p class="text-sm text-red-700">{{ error }}</p>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –§–æ—Ä–º–∞ -->
    <div class="bg-white rounded-xl shadow-lg p-8">
        <form method="post" action="{% if is_new %}/admin/course/new{% else %}/admin/course/{{ course.id }}{% endif %}">
            <!-- –°–∫—Ä—ã—Ç—ã–π —Ç–æ–∫–µ–Ω -->
            <input type="hidden" name="token" value="{{ token }}">
            
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è (2 –∫–æ–ª–æ–Ω–∫–∏) -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                <div class="md:col-span-2">
                    <label for="title" class="block text-sm font-medium text-gray-700 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞ *</label>
                    <input type="text" id="title" name="title" value="{{ course.title if course else '' }}" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <p class="mt-1 text-sm text-gray-500">–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞, –∫–æ—Ç–æ—Ä–æ–µ —É–≤–∏–¥—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</p>
                </div>
                
                <!-- Slug -->
                <div>
                    <label for="slug" class="block text-sm font-medium text-gray-700 mb-2">Slug (URL) *</label>
                    <input type="text" id="slug" name="slug" value="{{ course.slug if course else '' }}" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono">
                    <p class="mt-1 text-sm text-gray-500">–¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –¥–µ—Ñ–∏—Å—ã</p>
                </div>
                
                <!-- –ü—Ä–æ–≤–∞–π–¥–µ—Ä -->
                <div>
                    <label for="provider" class="block text-sm font-medium text-gray-700 mb-2">–ü—Ä–æ–≤–∞–π–¥–µ—Ä *</label>
                    <input type="text" id="provider" name="provider" value="{{ course.provider if course else '' }}" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <p class="mt-1 text-sm text-gray-500">–ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã –∏–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</p>
                </div>
                
                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                <div>
                    <label for="category_slug" class="block text-sm font-medium text-gray-700 mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                    <select id="category_slug" name="category_slug" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        <option value="design" {% if course and course.category_slug == 'design' %}selected{% endif %}>Design</option>
                        <option value="video" {% if course and course.category_slug == 'video' %}selected{% endif %}>Video</option>
                        <option value="marketing" {% if course and course.category_slug == 'marketing' %}selected{% endif %}>Marketing</option>
                        <option value="automation" {% if course and course.category_slug == 'automation' %}selected{% endif %}>Automation</option>
                        <option value="coding" {% if course and course.category_slug == 'coding' %}selected{% endif %}>Coding</option>
                        <option value="business" {% if course and course.category_slug == 'business' %}selected{% endif %}>Business</option>
                    </select>
                </div>
                
                <!-- –£—Ä–æ–≤–µ–Ω—å -->
                <div>
                    <label for="level" class="block text-sm font-medium text-gray-700 mb-2">–£—Ä–æ–≤–µ–Ω—å *</label>
                    <select id="level" name="level" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</option>
                        <option value="beginner" {% if course and course.level == 'beginner' %}selected{% endif %}>Beginner</option>
                        <option value="middle" {% if course and course.level == 'middle' %}selected{% endif %}>Middle</option>
                        <option value="pro" {% if course and course.level == 'pro' %}selected{% endif %}>Pro</option>
                    </select>
                </div>
                
                <!-- –§–æ—Ä–º–∞—Ç -->
                <div>
                    <label for="format" class="block text-sm font-medium text-gray-700 mb-2">–§–æ—Ä–º–∞—Ç *</label>
                    <select id="format" name="format" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç</option>
                        <option value="online" {% if course and course.format == 'online' %}selected{% endif %}>Online</option>
                        <option value="offline" {% if course and course.format == 'offline' %}selected{% endif %}>Offline</option>
                        <option value="mixed" {% if course and course.format == 'mixed' %}selected{% endif %}>Mixed</option>
                    </select>
                </div>
                
                <!-- –¶–µ–Ω–∞ -->
                <div>
                    <label for="price_from" class="block text-sm font-medium text-gray-700 mb-2">–¶–µ–Ω–∞ (–æ—Ç) *</label>
                    <input type="number" id="price_from" name="price_from" value="{{ course.price_from if course else '' }}" min="0" step="100" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <p class="mt-1 text-sm text-gray-500">–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö</p>
                </div>
                
                <!-- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
                <div>
                    <label for="duration" class="block text-sm font-medium text-gray-700 mb-2">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å *</label>
                    <input type="text" id="duration" name="duration" value="{{ course.duration if course else '' }}" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="4 –Ω–µ–¥–µ–ª–∏">
                </div>
            </div>
            
            <!-- –ü–æ–ª–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–µ –ø–æ–ª—è -->
            <div class="space-y-6 mb-8">
                <!-- –¢–µ–≥–∏ -->
                <div>
                    <label for="tags" class="block text-sm font-medium text-gray-700 mb-2">–¢–µ–≥–∏</label>
                    <input type="text" id="tags" name="tags" value="{{ course.tags if course else '' }}" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="ai, python, ml, data science">
                    <p class="mt-1 text-sm text-gray-500">–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é. –ü–æ –Ω–∏–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∏—Å–∫.</p>
                </div>
                
                <!-- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                <div>
                    <label for="short_desc" class="block text-sm font-medium text-gray-700 mb-2">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ *</label>
                    <textarea id="short_desc" name="short_desc" rows="3" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">{{ course.short_desc if course else '' }}</textarea>
                    <p class="mt-1 text-sm text-gray-500">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∫—É—Ä—Å–∞ (–º–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤)</p>
                </div>
                
                <!-- –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ -->
                <div>
                    <label for="affiliate_url" class="block text-sm font-medium text-gray-700 mb-2">–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ *</label>
                    <input type="url" id="affiliate_url" name="affiliate_url" value="{{ course.affiliate_url if course else '' }}" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="https://example.com/aff/...">
                    <p class="mt-1 text-sm text-gray-500">–°—Å—ã–ª–∫–∞ –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ /out/[slug]</p>
                </div>
            </div>
            
            <!-- –ß–µ–∫–±–æ–∫—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ -->
            <div class="flex items-center mb-10">
                <input type="checkbox" id="is_published" name="is_published" value="true" {% if course and course.is_published %}checked{% endif %} class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="is_published" class="ml-3 text-sm font-medium text-gray-700">
                    –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫—É—Ä—Å (—Å–¥–µ–ª–∞—Ç—å –≤–∏–¥–∏–º—ã–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ)
                </label>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <div class="flex justify-between pt-6 border-t border-gray-200">
                <div>
                    <a href="/admin/courses?token={{ token }}" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium">
                        ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                    </a>
                </div>
                <div class="space-x-4">
                    {% if not is_new %}
                    <a href="/course/{{ course.slug }}" target="_blank" class="px-6 py-3 border border-blue-300 rounded-lg text-blue-600 hover:bg-blue-50 font-medium">
                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ
                    </a>
                    {% endif %}
                    <button type="submit" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-medium">
                        {% if is_new %}
                        –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
                        {% else %}
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        {% endif %}
                    </button>
                </div>
            </div>
        </form>
    </div>
    
    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
    <div class="mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-3">üìå –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é</h3>
        <ul class="space-y-2 text-blue-800">
            <li class="flex items-start">
                <span class="mr-2">‚Ä¢</span>
                <span><strong>Slug</strong> ‚Äî —á–∞—Å—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, "python-ml-basics"). –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤.</span>
            </li>
            <li class="flex items-start">
                <span class="mr-2">‚Ä¢</span>
                <span><strong>–¢–µ–≥–∏</strong> ‚Äî –≤–∞–∂–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞. –î–æ–±–∞–≤—å—Ç–µ 3-5 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é.</span>
            </li>
            <li class="flex items-start">
                <span class="mr-2">‚Ä¢</span>
                <span>–ï—Å–ª–∏ –Ω–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≥–∞–ª–æ—á–∫—É "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å", –∫—É—Ä—Å –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –∞–¥–º–∏–Ω–∫–µ.</span>
            </li>
        </ul>
    </div>
</div>
{% endblock %}
