{% extends "base.html" %}

{% block title %}–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è -->
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold text-gray-900">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</h1>
            <p class="text-gray-600 mt-2">–í—Å–µ–≥–æ –∫—É—Ä—Å–æ–≤: {{ total_courses }}. –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ current_page }} –∏–∑ {{ total_pages }}</p>
        </div>
        <a href="/admin/course/new?token={{ token }}" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium flex items-center">
            <span class="mr-2">+</span> –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
        </a>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫—É—Ä—Å–æ–≤ -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–£—Ä–æ–≤–µ–Ω—å</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–¶–µ–Ω–∞</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ö–ª–∏–∫–∏</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°—Ç–∞—Ç—É—Å</th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {% for course in courses %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ course.id }}</td>
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium text-gray-900">{{ course.title }}</div>
                            <div class="text-sm text-gray-500">{{ course.provider }}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                {{ course.category_slug }}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ course.level }}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ course.price_from }} ‚ÇΩ</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            <span class="font-medium">{{ course.clicks }}</span> –∫–ª–∏–∫–æ–≤
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            {% if course.is_published %}
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω
                            </span>
                            {% else %}
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                –ß–µ—Ä–Ω–æ–≤–∏–∫
                            </span>
                            {% endif %}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <a href="/admin/course/{{ course.id }}?token={{ token }}" class="text-blue-600 hover:text-blue-900 mr-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a href="/course/{{ course.slug }}" target="_blank" class="text-gray-600 hover:text-gray-900">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="8" class="px-6 py-12 text-center text-gray-500">
                            <div class="text-4xl mb-4">üìö</div>
                            <p class="text-lg">–ö—É—Ä—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                            <p class="mt-2">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    {% if total_pages > 1 %}
    <div class="flex justify-between items-center mt-8">
        <div>
            {% if current_page > 1 %}
            <a href="?token={{ token }}&page={{ current_page - 1 }}" class="px-5 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium">
                ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
            </a>
            {% endif %}
        </div>
        
        <div class="text-gray-700">
            –°—Ç—Ä–∞–Ω–∏—Ü–∞ <strong>{{ current_page }}</strong> –∏–∑ <strong>{{ total_pages }}</strong>
        </div>
        
        <div>
            {% if current_page < total_pages %}
            <a href="?token={{ token }}&page={{ current_page + 1 }}" class="px-5 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium">
                –°–ª–µ–¥—É—é—â–∞—è ‚Üí
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-white p-6 rounded-xl shadow">
            <h3 class="text-lg font-semibold text-gray-900 mb-2">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <ul class="space-y-2">
                <li><a href="/admin/course/new?token={{ token }}" class="text-blue-600 hover:text-blue-800">+ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫—É—Ä—Å</a></li>
                <li><a href="/admin/courses?token={{ token }}&sort=new" class="text-blue-600 hover:text-blue-800">–ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–µ –∫—É—Ä—Å—ã</a></li>
                <li><a href="/admin/courses?token={{ token }}&is_published=false" class="text-blue-600 hover:text-blue-800">–ü–æ–∫–∞–∑–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏</a></li>
            </ul>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow">
            <h3 class="text-lg font-semibold text-gray-900 mb-2">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <p class="text-gray-600">–í—Å–µ–≥–æ –∫—É—Ä—Å–æ–≤: <strong>{{ total_courses }}</strong></p>
            <p class="text-gray-600 mt-1">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: <strong class="text-green-600">{{ courses|selectattr('is_published')|list|length }}</strong></p>
            <p class="text-gray-600 mt-1">–ß–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: <strong class="text-red-600">{{ courses|rejectattr('is_published')|list|length }}</strong></p>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow">
            <h3 class="text-lg font-semibold text-gray-900 mb-2">–°–ø—Ä–∞–≤–∫–∞</h3>
            <p class="text-sm text-gray-600">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ: <code class="bg-gray-100 px-2 py-1 rounded text-xs">{{ token[:10] }}...</code></p>
            <p class="text-sm text-gray-600 mt-2">–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.</p>
        </div>
    </div>
</div>
{% endblock %}
